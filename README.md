Property Token Platform
Introduction
What This Platform Is
A blockchain‑powered real‑estate investment platform enabling:
Fractional ownership of property (tokenized assets)
Investor trading of property‑backed tokens
Automated dividend distribution using rental income
FIAT → Crypto → FIAT settlement flows
A modern Web3 + Web2 hybrid architecture
This is a Real Estate Tokenization or Fractional Real Estate Investment on the Blockchain. We aim to combine property investment with blockchain technology to make ownership more liquid, transparent, and accessible.

These properties are owned by property managers which are linked to either a company or privately owned and can be invested in by investors. The investors should be able to buy these tokens and trade them. Income is generated by the evaluation of the property and also by the rents paid by tenants. Once value is created, dividends are distributed to investors based on the distribution period of each property. 

Each token represents a fraction of ownership or share in the property.
### For example:
1. A $100,000 property is divided into 10,000 tokens.
2. Each token = 0.01% ownership = $10 per token.
3. If you buy 100 tokens, you own 1% of the property.
#### These tokens are stored on a blockchain, making ownership transparent, tamper-proof, and tradable.


### System Entities & Responsibilities
These are the different entities and their responsibilities in the system
Users (Admin, Property Manager, Investors, Tenants)
A user should be able to go through the authentication flow which should be Session based and these sessions will be stored in a postgresql database and the token id will be hashed and stored in the cookies.

#### Admin:
Should be able to list a property
Should be able to perform all functions including managing all other entities like users, properties etc…
Should be the sole person who can initiate the tokenization of a property. 
Should be the only person who can initiate the Burning of tokens + payout upon the request of a property manager.
#### Investor:
Can invest on a property by buying tokens.
Cat trade tokens
Can receive dividends
Can view properties available for investment. 
Can view all transactions and dividends

#### Property Manager:
Can create a listing for a property and collect metadata for property tokenization which will be deployed by admin
Can view property.
Can modify property before being deployed/tokenized by admin
Can view all investors and transactions related to owned property. 
Can generate property payment links to be provided to the tenant.
Can revoke property rent payment link. 

#### Tenant:
Can pay rent to a property based on a link provided by the property manager or admin. (Once link is used by tenant, the property details are allocated and added to tenant for future payments) 
Can view all transactions made.
Can make payments via fiat or crypto.
Fiat is converted to crypto and stored in the blockchain.

#### Company(LLC/SPV:Special Purpose Vehicle) + Legal Entity
A company legally owns the property.
Property is rented to tenants and the rent generates real income.
Income flows to the company’s bank account or crypto wallet and to the blockchain.
Funds are later distributed (on-chain) to investors or token holders


Project Infrastructure Overview
Real Property (Owned by LLC/PSV)
Rental income, valuation
Backend
NestJs + PostgreSQL -> Prisma
REST API
Handles user authentication, sessions
Stores user, property plus metadata, token, and dividend data in PostgreSQL
KYC/AML verification via Sumsub / Persona
Stores metadata (users, properties, token balances, rents, dividends etc….)
Communicates with blockchain (via Alchemy / Infura / Ethers.js)
Admin API: property creation, property approval, rent income, dividend triggers
Investor API: portfolio, transaction history, etc.
Property manager API: property creation, property rent link generation. 
Handles user authentication (Web2), KYC, rent management, fiat processing
Backend Modules
AuthModule – JWT, email login, optional Web3 signature login
KYCModule – integrates with SumSub / ComplyCube
PropertyModule – CRUD for properties
InvestorModule – portfolio, dividends, wallet linking
RentModule – rent invoices, tenant payments, reconciliation
PaymentsModule – Stripe + Circle integration
BlockchainModule – Web3.js/ethers.js provider + contract calls
		Key Responsibilities
Store off‑chain data
Sync on‑chain data with DB
Trigger dividend distribution
Validate investor transactions
Handle FIAT rent automation

Example: Admin/Property lists and or approves a property → Backend stores data in DB → Backend deploys token smart contract  → returns contract address to frontend.

## Payment Infrastructure.
1. Stripe (FIAT payments for rent)
2. Circle or On/Off Ramp API (FIAT → USDC, USDC → FIAT).
3. Blockchain Network
4. Polygon / Avalanche / Base (low fees)
5. Stores token balances, transfers, dividend distributions

## Database Layer(PostgreSQL)
1. User profiles & KYC
2. Off-Chain property data
3. Rents payments(FIAT)
4. Off-chain investor accounting

## Frontend
1. Next.js + TypeScript
2. Wallet connection (MetaMask, WalletConnect)
### Dashboard for investors & property managers
1. Portfolio view
2. Admin dashboard
3. List properties, triggers tokenization and dividends.
4. Approve properties created by property manager and trigger tokenization
5. View properties
### Investor dashboard
1. View, buy, sell tokens
2. Marketplace view
### Example: investor clicks "Buy Tokens" → sends transaction to smart contract
### Tenant dashboard
1. Rental property list and item view
2. Rent payment workflow
### Property Manager dashboard.
1. List and view properties.

## SMART CONTRACTS (Solidity)
1. Token issuance(ERC-3643)
2. Dividend distribution logic
3. Marketplace logic
4. Ownership tracking
5. On-chain compliance rules.
6. ERC‑20 (or ERC‑1155) tokens representing fractional ownership
7. Dividend distribution smart contract
8. Property registry contract (metadata, valuation, compliance)

### Contracts:
1. Property Token Contract (ERC-30 or ERC-1155)
 1.1. Defines total supply =  shares of the property
 1.2 Represents investor fractions
 1.3 Allows secondary trading.
2. Dividend Contract
 2.1 Receives USDC from backend
 2.2 Stores snapshot of token holders
 2.3 Pays out rent‑based rewards proportionally.
3. Property Registry Contract
 3.1 Maps property ID → token address
 3.2 Stores valuation hashes/IPFS data
 3.3 Stores compliance/ownership metadata
 
### NB:
1. Wallet connection (MetaMask / WalletConnect)
2. Frontend interacts with firebase for company or property documents
3. Or the backend interacts with AWS S3 or local storage for documents. 

## FIAT ↔ Crypto Flow
1. FIAT Rent Payment → USDC → Dividends
2. Tenant receives payment link (Stripe Checkout)
3. Tenant pays rent in FIAT
4. Stripe sends webhook → rent confirmed
5. Backend converts part of FIAT → USDC via Circle
6. Backend sends USDC to Dividend Contract
7. Dividend contract distributes USDC to token holders
8. Investor Withdrawals (USDC → FIAT)
9. Investor requests FIAT withdrawal
10. Backend converts USDC → FIAT using Circle
11. Backend pays out to investor’s bank account

## Summary
The backend acts as the bridge between real-world data (rent, tenants, valuations) and on-chain logic (ownership, tokens, dividends). It talks to the blockchain via Web3 provider (Alchemy/Infura)
The frontend is what investors use to view, invest, and trade tokens.
The blockchain holds ownership, ensures trust, and executes payments transparently.
The smart contract defines the logic for the blockchain

## MVP feature set
1. User signup/login + wallet connect
2. Admin/Property manager can list a property (details, valuation, images)
3. Tokenization of property (minting fractional tokens)
4. Investors can buy tokens (USDC or test crypto)
5. Token ownership recorded on-chain
6. Simple dividend simulation (manual trigger by admin)
7. Portfolio dashboard showing holdings and income

## Once MVP is live, you can layer in:
1. Secondary marketplace for token trading
2. Automated on-chain rent payout
3. Dynamic property valuations via oracles (like Chainlink)
4. Advanced KYC tiers (retail vs. accredited investors)

## Monorepo project tree
real-estate-tokenization/
├── client/              # Next.js Frontend (deploy to Vercel)
│   ├── src/
│   ├── public/
│   ├── package.json
│   └── tsconfig.json
│
├── server/              # NestJS Backend (deploy to Render)
│   ├── src/
│   ├── prisma/
│   ├── Dockerfile
│   ├── package.json
│   └── tsconfig.json
│
├── contracts/           # Hardhat / Foundry smart contracts
│   ├── src/
│   ├── test/
│   ├── scripts/
│   ├── hardhat.config.ts
│   └── package.json

## The benefit of this structure:
1. Completely isolated CI/CD pipelines
2. Clear boundaries — the backend becomes a “public API”
3. Frontend consumes the backend through REST or GraphQL
4. Contracts stay independent and can have their own deployment pipeline
5. Easy for other developers to onboard
6. Easy to move to microservices in the future



## Frontend (client) — Standalone App
real-estate-client/
├── src/
│   ├── pages/              # routes
│   ├── app/                # Next.js (App Router)
│   ├── components/         # UI components
│   ├── hooks/
│   ├── utils/
│   ├── services/
│   │   ├── api.ts          # axios client → backend
│   │   └── blockchain.ts   # ethers providers
│   ├── config/
│   │   ├── env.ts
│   │   └── contracts.ts    # contract addresses
│   └── types/              # FE-only types (no sharing)
├── public/
├── .env.local
├── next.config.js
├── package.json
└── tsconfig.json
### Responsibilities:
1. Wallet connection (Metamask, WalletConnect)
2. Display properties, token prices, yields
3. Buy/sell tokens via contract interaction
4. Read data from backend API
5. Investor dashboard
6. Tenant payment portal (optional)


## Backend (server) — Standalone NestJS App
server/
├── src/
│   ├── main.ts
│   ├── app.module.ts
│   ├── config/                  # env configs
│   ├── common/                  # interceptors, pipes
│   ├── modules/
│   │   ├── auth/
│   │   │   ├── auth.controller.ts
│   │   │   ├── auth.service.ts
│   │   │   └── auth.module.ts
│   │   ├── properties/
│   │   │   ├── properties.controller.ts
│   │   │   ├── properties.service.ts
│   │   │   └── properties.module.ts
│   │   ├── payments/
│   │   │   ├── payments.controller.ts
│   │   │   ├── payments.service.ts
│   │   │   └── payments.module.ts
│   │   ├── tenants/
│   │   ├── investors/
│   │   ├── onchain/
│   │   │   ├── onchain.service.ts     # Web3 interactions
│   │   │   └── onchain.module.ts
│   │   ├── bridge/                    # fiat ↔ crypto service layer
│   │   │   ├── bridge.service.ts
│   │   │   └── bridge.module.ts
│   │   └── webhooks/                  # Stripe, Paystack, etc.
│   ├── prisma/
│   │   ├── prisma.service.ts
│   │   └── seed.ts
├── prisma/
│   ├── schema.prisma
│   └── migrations/
├── test/
├── Dockerfile
├── docker-compose.yml
├── package.json
└── tsconfig.json


## Responsibilities:
1. Authentication / user profiles
2. KYC/AML compliance
3. Property registrations & metadata
4. Rent (FIAT) payment webhooks (Stripe, Circle etc.)
5. Fiat → crypto conversion logic for dividends
6. Dividend batching / merkle distribution generation
7. On-chain event listeners (property minted, dividends distributed)
8. Admin tools

## Smart Contracts (contracts)
contracts/
├── contracts/
│   ├── PropertyToken.sol
│   ├── DividendDistributor.sol
│   ├── Escrow.sol
│   ├── PropertyRegistry.sol
│   
├── scripts/
│   ├── deploy.ts
│   └── updateOracles.ts
├── test/
│   ├── propertyToken.test.ts
│   ├── dividendDistributor.test.ts
│   └── registry.test.ts
├── abi/
│   ├── PropertyToken.json
│   ├── DividendDistributor.json
│   └── ...
├── hardhat.config.ts
├── package.json
└── tsconfig.json


## Responsibilities:
1. Deploy property tokens
2. Track ownership
3. Manage distributions
4. Market functionality (listing, trading)
5. Verify contract code on Etherscan
6. How the frontend interacts with contracts

## Frontend uses:
wagmi
viem
ethers.js

## Backend uses:
ethers.js (inside NestJS service)
Private keys stored in environment variables (Render secret vault)


